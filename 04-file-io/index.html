















<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2021-10-17 17:53:54 +0000">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/syntax.css" />
    <link rel="license" href="#license-info" />

    



    <!-- Favicons for everyone -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../assets/favicons/swc/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/favicons/swc/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/favicons/swc/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/favicons/swc/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../assets/favicons/swc/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../assets/favicons/swc/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../assets/favicons/swc/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../assets/favicons/swc/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="../assets/favicons/swc/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="Software Carpentry - Introduction to Docker"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="../assets/favicons/swc/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="../assets/favicons/swc/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="../assets/favicons/swc/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="../assets/favicons/swc/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="../assets/favicons/swc/mstile-310x310.png" />


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

  <title>
  File I/O with Containers &ndash; Introduction to Docker
  </title>  

  </head>
  <body>

    


<div class="panel panel-default life-cycle">
  <div id="life-cycle" class="panel-body beta">
    This lesson is being piloted (Beta version)
  </div>
</div>




    <div class="container">
      
















  
  










<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      
      <a href="https://software-carpentry.org" class="pull-left">
        <img class="navbar-logo" src="../assets/img/swc-icon-blue.svg" alt="Software Carpentry logo" />
      </a>
      

      
      <a class="navbar-brand" href="../index.html">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>

        
	
        <li><a href="../setup.html">Setup</a></li>

        
        
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            <li><a href="../01-introduction/index.html">Introduction</a></li>
            
            
            <li><a href="../02-pulling-images/index.html">Pulling Images</a></li>
            
            
            <li><a href="../03-running-containers/index.html">Running Containers</a></li>
            
            
            <li><a href="../04-file-io/index.html">File I/O with Containers</a></li>
            
            
            <li><a href="../05-dockerfiles/index.html">Writing Dockerfiles and Building Images</a></li>
            
            
            <li><a href="../06-removal/index.html">Removal of Containers and Images</a></li>
            
            
            <li><a href="../07-coffee-break/index.html">Coffee break</a></li>
            
            
            <li><a href="../08-entry/index.html">Using CMD and ENTRYPOINT in Dockerfiles</a></li>
            
            
            <li><a href="../09-build-with-ci/index.html">Build Docker Images with GitLab CI</a></li>
            
            
            <li><a href="../10-challenge-examples/index.html">Challenge Examples</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="../aio/index.html">All in one page (Beta)</a></li>
          </ul>
        </li>
        
	

	
	
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference.html">Reference</a></li>
            
            
            <li><a href="../discuss/index.html">Discussion</a></li>
            
            
            <li><a href="../guide/index.html">Instructor Notes</a></li>
            
          </ul>
        </li>
	

	
        <li><a href="../LICENSE.html">License</a></li>
	
	<li><a href="/edit//_episodes/04-file-io.md" data-checker-ignore>Improve this page <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></li>
	
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>




























  
  











<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../03-running-containers/index.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
    <h3 class="maintitle"><a href="../">Introduction to Docker</a></h3>
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../05-dockerfiles/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>

<article>
<div class="row">
  <div class="col-md-1">
  </div>
  <div class="col-md-10">
    <h1 class="maintitle">File I/O with Containers</h1>
  </div>
  <div class="col-md-1">
  </div>
</div>












<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 15 min
      <br/>
      <strong>Exercises:</strong> 5 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How do containers interact with my local file system?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Better understand I/O with containers</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<h1 id="copying">Copying</h1>

<p><a href="https://docs.docker.com/engine/reference/commandline/cp/">Copying</a> files between the local host and Docker containers is possible.
On your local host find a file that you want to transfer to the container and then</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>touch io_example.txt
# If on Mac may need to do: chmod a+x io_example.txt
echo "This was written on local host" &gt; io_example.txt
docker cp io_example.txt &lt;CONTAINER ID&gt;:/home/docker/data/
</code></pre></div></div>

<p>and then from the container check and modify it in some way</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pwd
ls io_example.txt
cat io_example.txt
echo "This was written inside Docker" &gt;&gt; io_example.txt
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/home/docker/data
io_example.txt
This was written on local host
</code></pre></div></div>

<p>and then on the local host copy the file out of the container</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker cp &lt;CONTAINER ID&gt;:/home/docker/data/io_example.txt .
</code></pre></div></div>

<p>and verify if you want that the file has been modified as you wanted</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat io_example.txt
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>This was written on local host
This was written inside Docker
</code></pre></div></div>

<h1 id="volume-mounting">Volume mounting</h1>

<p>What is more common and arguably <strong>more</strong> useful is to <a href="https://docs.docker.com/storage/volumes/">mount volumes</a> to
containers with the <code class="language-plaintext highlighter-rouge">-v</code> flag.
This allows for direct access to the host file system inside of the container and for
container processes to write directly to the host file system.</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -v &lt;path on host&gt;:&lt;path in container&gt; &lt;image&gt;
</code></pre></div></div>

<p>For example, to mount your current working directory on your local machine to the <code class="language-plaintext highlighter-rouge">data</code>
directory in the example container</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --rm -ti -v $PWD:/home/docker/data matthewfeickert/intro-to-docker:latest
</code></pre></div></div>

<p>From inside the container you can <code class="language-plaintext highlighter-rouge">ls</code> to see the contents of your directory on your local
machine</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls
</code></pre></div></div>

<p>and yet you are still inside the container</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pwd
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/home/docker/data
</code></pre></div></div>

<p>You can also see that any files created in this path in the container persist upon exit</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>touch created_inside.txt
exit
ls *.txt
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>created_inside.txt
</code></pre></div></div>

<p>This I/O allows for Docker images to be used for specific tasks that may be difficult to
do with the tools or software installed on only the local host machine.
For example, debugging problems with software that arise on cross-platform software, or
even just having a specific version of software perform a task (e.g., using Python 2 when
you don’t want it on your machine, or using a specific release of
<a href="https://hub.docker.com/r/matthewfeickert/latex-docker/">TeX Live</a> when you aren’t ready to update your system release).</p>

<blockquote class="challenge">
  <h2 id="flag-choices">Flag choices</h2>

  <p>What will be the result of running the following command?</p>
  <blockquote>
    <div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --rm -v $PWD:/home/docker/data matthewfeickert/intro-to-docker:latest
</code></pre></div>    </div>
  </blockquote>

  <blockquote class="solution">
    <h2 id="solution">Solution</h2>

    <p>Outwardly it would appear that there is no affect!
You are returned to your starting terminal.
However, something <em>did</em> happen.
Look again at the flags: <code class="language-plaintext highlighter-rouge">--rm -v</code> …but no <code class="language-plaintext highlighter-rouge">-ti</code> for interactive.
So the container got spun up by <code class="language-plaintext highlighter-rouge">docker run</code>, wasn’t given any command and
and so executed a Bash shell with <code class="language-plaintext highlighter-rouge">/bin/bash</code>, wasn’t put into an interactive
state and finished, and then cleaned itself up with <code class="language-plaintext highlighter-rouge">--rm</code>.</p>
  </blockquote>
</blockquote>

<h1 id="running-jupyter-from-a-docker-container">Running Jupyter from a Docker Container</h1>

<p>You can run a Jupyter server from inside of your Docker container.
First run a container (with Jupyter installed) while
<a href="https://docs.docker.com/engine/reference/run/#expose-incoming-ports">exposing</a> the container’s internal port <code class="language-plaintext highlighter-rouge">8888</code>
with the <code class="language-plaintext highlighter-rouge">-p</code> flag</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --rm -ti -p 8888:8888 matthewfeickert/intro-to-docker:latest /bin/bash
</code></pre></div></div>

<p>Then <a href="https://jupyter.readthedocs.io/en/latest/running.html#starting-the-notebook-server">start a Jupyter server</a> with the server listening on all IPs</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jupyter lab --allow-root --no-browser --ip 0.0.0.0
</code></pre></div></div>

<p>though for your convince the example container has been configured with these default
settings so you can just run</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jupyter lab
</code></pre></div></div>

<p>Finally, copy and paste the following with the generated token from the server as
<code class="language-plaintext highlighter-rouge">&lt;token&gt;</code> into your web browser on your local host machine</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://localhost:8888/?token=&lt;token&gt;
</code></pre></div></div>

<p>You now have access to Jupyter running on your Docker container.</p>






<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Learn how <code class="language-plaintext highlighter-rouge">docker cp</code> works</p>
</li>
    
    <li><p>Learn about volume mounts</p>
</li>
    
    <li><p>Show port forwarding of applications</p>
</li>
    
  </ul>
</blockquote>

</article>



























  
  











<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../03-running-containers/index.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../05-dockerfiles/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


      
      






<footer>
  <div class="row">
    <div class="col-md-6 license" id="license-info" align="left">
	
	Licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a> 2018–2021
	by <a href="https://carpentries.org/">The Carpentries</a>
        <br>
        Licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a> 2016–2018
	by <a href="https://software-carpentry.org">Software Carpentry Foundation</a>
	
    </div>
    <div class="col-md-6 help-links" align="right">
	
	<a href="/edit//_episodes/04-file-io.md" data-checker-ignore>Edit on GitHub</a>
	
	/
	<a href="/blob//CONTRIBUTING.md" data-checker-ignore>Contributing</a>
	/
	<a href="/">Source</a>
	/
	<a href="/blob//CITATION" data-checker-ignore>Cite</a>
	/
	<a href="mailto:matthew.feickert@cern.ch">Contact</a>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" align="center">
      Using <a href="https://github.com/carpentries/styles/">The Carpentries style</a>
      version <a href="https://github.com/carpentries/styles/releases/tag/v9.5.3">9.5.3</a>.
    </div>
  </div>
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
